<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">

  <title>Busca de Doadores Cadastrados</title>

  <!-- Principal CSS do Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <!-- <link href="form-validation.css" rel="stylesheet"> -->
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
</head>

<body class="bg-light">

  <div class="container">
    <div class="py-5 text-center">
      <img class="d-block mx-auto mb-4" src="sangue.png" alt="" width="350" height="210">
      <h3>Bem Vindo ao BloodDonation!</h3>
      <p></p>
      <!-- <form action="busca.php" method="POST" class="navbar-form pull-right"> -->
      <form class="navbar-form pull-right">
        <input type="text" class="span2" name="nomePesquisado" id="nomePesquisado">
        <button id="submit" class="btn btn-inverse" type="button">Localizar meu Cadastro</button>
      </form>
      <div>
        <table id="tabela" class="table table-hover">
          <thead class="thead-light">
            <tr>
              <td>Nome</td>
              <td>Nickname</td>
              <td>Tipo Sangu√≠neo</td>
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    $("#tabela")
      .css("margin-top","30px")
      .children().first()
        .css("background","#f8d5dc")
        .css("font-weight","bold");
    $("#submit").click(function () {
      var dados = $('#nomePesquisado').serialize();
      $.ajax({
        type: 'POST',
        dataType: 'json',
        url: 'busca.php',
        async: true,
        data: dados,
        success: function (response) {
          let dados = "";
          response.forEach(element => {
            console.log(element);
            dados = dados + "<tr><td>" + element.primeiroNome + "</td>" +
            "<td>" + element.nickname + "</td>" +
            "<td>" + element.sangue + "</td></tr>";
          });
          $("#tabela").children().last().children().remove()
          $("#tabela").children().last().append(dados);
        }
      });
    });
  </script>
</body>

</html>